<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tidars - Asisten Belajar AI</title>
  <link rel="stylesheet" href="style.css"/>
  <!-- Toastify CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <!-- SweetAlert2 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
</head>
<body>
  <!-- Sidebar Kiri untuk Sessions -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>ğŸ’¬ Chat Sessions</h2>
      <button id="btn-new-session" class="sidebar-btn" title="Session Baru">+ Baru</button>
    </div>
    
    <div class="sessions-list" id="sessions-list">
      <div class="loading">Memuat sessions...</div>
    </div>
    
    <div class="sidebar-footer">
      <button id="toggle-sidebar" class="sidebar-toggle">â—€</button>
    </div>
  </div>

  <!-- Toggle button ketika sidebar collapsed -->
  <button id="sidebar-open-btn" class="sidebar-open-btn" title="Buka Sidebar">â˜°</button>

  <!-- Main Chat Area -->
  <div class="main-container">
    <div class="container">
      <div class="header">
        <button id="toggle-sidebar-mobile" class="sidebar-toggle-mobile">â˜°</button>
        <div class="header-title">
          <h1>ğŸ“š Tidars</h1>
          <p class="subtitle">Asisten pembelajaran AI untuk semua mata pelajaran</p>
        </div>
        <div class="header-actions">
          <button id="btn-stats" class="icon-btn" title="Statistik Session">ğŸ“Š</button>
          <button id="btn-history" class="icon-btn" title="Lihat History">ğŸ“œ</button>
          <button id="btn-clear" class="icon-btn" title="Hapus Chat">ğŸ—‘ï¸</button>
        </div>
        <div id="status" class="status">Memulai...</div>
      </div>
      
      <div id="chat-box" class="chat-box"></div>
      
      <div class="input-container">
        <form id="chat-form">
          <!-- Preview gambar yang akan diupload -->
          <div id="image-preview-container" class="image-preview-container" style="display: none;">
            <div class="image-preview-wrapper">
              <img id="image-preview" src="" alt="Preview" />
              <button type="button" id="remove-image" class="remove-image-btn" title="Hapus gambar">âœ•</button>
            </div>
          </div>
          
          <div class="input-wrapper">
            <input 
              type="file" 
              id="image-input" 
              accept="image/*"
              style="display: none;"
            />
            <button type="button" id="upload-btn" class="icon-btn-input" title="Upload Gambar">ğŸ“·</button>
            
            <input 
              type="text" 
              id="user-input" 
              placeholder="Tanya apa saja tentang Matematika, Sains, Bahasa Inggris, dll..." 
              autocomplete="off" 
              required 
            />
            <button type="submit">Kirim</button>
          </div>
        </form>
        <div class="footer">
          <small>Powered by Google Gemini AI âœ¨ | Upload gambar untuk pertanyaan visual ğŸ“¸</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal untuk Stats -->
  <div id="modal-stats" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ğŸ“Š Statistik Session</h2>
        <span class="close" data-modal="modal-stats">&times;</span>
      </div>
      <div class="modal-body" id="stats-content">
        <div class="loading">Memuat...</div>
      </div>
    </div>
  </div>

  <!-- Modal untuk History -->
  <div id="modal-history" class="modal">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2>ğŸ“œ Riwayat Percakapan</h2>
        <span class="close" data-modal="modal-history">&times;</span>
      </div>
      <div class="modal-body" id="history-content">
        <div class="loading">Memuat...</div>
      </div>
    </div>
  </div>

  <!-- Modal untuk Image Lightbox -->
  <div id="image-lightbox" class="image-lightbox" style="display: none;">
    <span class="lightbox-close">&times;</span>
    <img id="lightbox-image" src="" alt="Enlarged image" />
  </div>

  <!-- Toastify JS -->
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <script src="script.js"></script>
</body>
</html>
